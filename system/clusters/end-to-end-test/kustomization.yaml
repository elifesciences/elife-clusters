apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
commonLabels:
  service_type: system
resources:
- ../../classes/kind
- secret-store
patches:
- target:
    kind: HelmRelease
    name: cluster-autoscaler
    namespace: autoscaler-system
  path: patches/cluster-autoscaler/kwok-provider.yaml
- target:
    kind: HelmRelease
    name: cert-manager
    namespace: certificate-system
  path: patches/cert-manager/run-on-realnode.yaml
- target:
    kind: HelmRelease
    name: external-secrets
    namespace: certificate-system
  path: patches/external-secrets/run-on-realnode.yaml
- target:
    kind: HelmRelease
    name: ingress-nginx
    namespace: ingress-system
  path: patches/ingress-nginx/run-on-realnode.yaml
configMapGenerator:
- name: kwok-provider-config
  namespace: autoscaler-system
  files:
  - config=config/kwok-provider-config.yaml
  options:
    disableNameSuffixHash: true
- name: kwok-provider-templates
  namespace: autoscaler-system
  files:
  - templates=config/kwok-provider-templates.yaml
  options:
    disableNameSuffixHash: true
